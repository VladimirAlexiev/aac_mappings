webpackJsonp([2,0],{0:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},r=a(39),s=l(r),i=a(1),u=l(i),o=a(17),d=a(214),c=l(d),f=a(206),p=l(f),m=a(208),h=l(m),E=a(215),v=l(E),g=[{name:"YCBA",endpoint:"http://collection.britishart.yale.edu/openrdf-sesame/repositories/ycba",predicate:"http://erlangen-crm.org/current/",E39_Actor:{"default":null},"E22_Man-Made_Object":{"default":"http://collection.britishart.yale.edu/id/object/1000"}},{name:"SAAM",endpoint:"http://edan.si.edu/saam/sparql",predicate:"http://www.cidoc-crm.org/cidoc-crm/",E39_Actor:{"default":null},"E22_Man-Made_Object":{"default":"http://edan.si.edu/saam/id/object/1991.189"}},{name:"British Museum",endpoint:"http://collection.britishmuseum.org/sparql",predicate:"http://erlangen-crm.org/current/",E39_Actor:{"default":"http://collection.britishmuseum.org/id/person-institution/70240"},"E22_Man-Made_Object":{"default":"http://collection.britishmuseum.org/id/object/YCA62958"}}],_=u["default"].createClass({displayName:"App",getInitialState:function(){return{loading:!0,modal:{show:!1},fields:null}},componentDidMount:function(){var e=s["default"].getJSON("/data?entity_type="+ENTITY_TYPE);e.done(this.initializeData),e.fail(function(e,t){return console.log("Error getting json: "+t)})},initializeData:function(e){window.location.hash?this.setHashValues(this.getHashValues()):this.setHashValues({id:0,search:g[0].name}),window.addEventListener("hashchange",this.handleNewHash,!1);var t=function(e,t){return(e.sort_order||0)>=(t.sort_order||0)?1:-1};this.setState({loading:!1,fields:e.sort(t)})},setHashValues:function(e){void 0==e.id?e.id=this.state.currentItem:this.setState({currentItem:e.id}),void 0==e.search?e.search=this.state.search:this.setState({search:e.search});var t=g.findIndex(function(t){return t.name==e.search});window.location.hash="field_"+e.id+"-search_"+t},getHashValues:function(){var e=window.location.hash.replace("#","").split("-"),t=Number(e[0].replace("field_","")),a=g[Number(e[1].replace("search_",""))].name;return{id:t,search:a}},handleNewHash:function(){this.setHashValues(this.getHashValues())},showModal:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];this.setState({modal:{content:e,title:t,show:!0}})},render:function(){var e=this;if(this.state.loading)return!1;var t=g.find(function(t){return e.state.search==t.name}),a=this.state.fields[this.state.currentItem];return u["default"].createElement("main",null,u["default"].createElement(p["default"],{searchAgainst:this.state.search,data:g,setSearch:function(t){return e.setHashValues({search:t})},showObjectGraph:this.showModal}),u["default"].createElement("div",{className:"container-fluid"},u["default"].createElement("div",{className:"row"},u["default"].createElement(c["default"],{fields:this.state.fields,gotoField:function(t){return e.setHashValues({id:t})},currentItem:this.state.currentItem}),u["default"].createElement(h["default"],n({},a,{search:t,showModal:this.showModal})))),u["default"].createElement(v["default"],n({},this.state.modal,{onHide:function(){return e.setState({modal:{show:!1}})}})))}});(0,o.render)(u["default"].createElement(_,null),document.getElementById("app"))},81:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return r["default"].createElement("button",{className:"btn btn-info btn-xs hidden-print",onClick:function(t){return e.func(e.text,e.title)}},e.children)};var n=a(1),r=l(n)},133:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=l(n);t["default"]=r["default"].createClass({displayName:"search_input_field",getInitialState:function(){return{value:this.props["default"]||""}},handleChange:function(e){this.setState({value:e.target.value})},componentWillReceiveProps:function(e){e["default"]!=this.props["default"]&&this.setState({value:e["default"]||""})},render:function(){var e="sparql_"+this.props.value,t=this.props.value.replace(/_/g," "),a="Enter a "+t;return this.props["default"],r["default"].createElement("div",{className:"form-group"},r["default"].createElement("label",{className:"col-sm-3 text-right",htmlFor:e,style:{textTransform:"capitalize"}},t),r["default"].createElement("div",{className:"col-sm-6"},r["default"].createElement("input",{type:"text",className:"form-control",name:this.props.value,id:e,placeholder:a,value:this.state.value,onChange:this.handleChange})),r["default"].createElement("div",{className:"col-sm-3 hidden-print"},r["default"].createElement("a",{className:"search_link",href:this.state.value,target:"_blank"},"(link)")))}})},206:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=l(n),s=a(57),i=a(39),u=l(i),o=a(207),d=l(o),c=a(133),f=(l(c),r["default"].createClass({displayName:"Header",getInitialState:function(){return{modalLoading:!1}},loadObjectData:function(e){var t=this;if(this.state.modalLoading)return!1;this.setState({modalLoading:!0});var a=(0,u["default"])(e.target).data("type"),l=(0,u["default"])(e.target).data("modal-title"),n=u["default"].post("/full_graph",this.generateObjectData(a),"text");n.done(function(e){return t.handleDataReturn(e,l)}),n.fail(function(e,a,l){t.props.showObjectGraph(l),t.setState({modalLoading:!1})})},handleDataReturn:function(e,t){this.props.showObjectGraph(e,t),this.setState({modalLoading:!1})},generateObjectData:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?"ttl":arguments[0],a=this.props.data.findIndex(function(t){return t.name==e.props.searchAgainst});return{endpoint:this.props.data[a].endpoint,crm:this.props.data[a].predicate,values:{entity_uri:this.props.data[a][ENTITY_TYPE]["default"]},entity_type:ENTITY_TYPE,return_type:t}},render:function(){var e=this,t=ENTITY_TYPE,a=this.props.data.map(function(t,a){return r["default"].createElement(s.Button,{active:e.props.searchAgainst==t.name,onClick:function(){return e.props.setSearch(t.name)},key:a},t.name)}),l=r["default"].createElement(s.ButtonGroup,{bsSize:"small",role:"group",className:"search_buttons"},a),n=r["default"].createElement(s.ButtonGroup,{bsSize:"small",role:"group",className:"download_buttons"},r["default"].createElement(s.Button,{"data-type":"ttl","data-modal-title":"Entity as Linked Open Data (in Turtle)",disabled:this.state.modalLoading,onClick:this.loadObjectData},"Turtle"),r["default"].createElement(s.Button,{"data-type":"nested_ttl","data-modal-title":"Entity as Turtle (Nested Graph with Blank Nodes)",disabled:this.state.modalLoading,onClick:this.loadObjectData},"Turtle (Nested)"),r["default"].createElement(s.Button,{"data-type":"json","data-modal-title":"JSON Representation of the Entity",disabled:this.state.modalLoading,onClick:this.loadObjectData},"JSON"));return r["default"].createElement(d["default"],{title:t,bottomButtonsLabel:"Current SPARQL Endpoint:",bottomButtons:l,topButtonsLabel:this.state.modalLoading?"Processing...":"Export Entity As:",topButtons:n})}}));t["default"]=f},207:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return r["default"].createElement("header",{className:"container-fluid page_header hidden-print"},r["default"].createElement("div",{className:"row"},r["default"].createElement("div",{className:"col-md-4"},r["default"].createElement("h1",null,r["default"].createElement("a",{href:"/"},"AAC Entity Mappings")," "),r["default"].createElement("h2",null,e.title)),r["default"].createElement("div",{className:"col-md-8"},r["default"].createElement("div",{className:"pull-right"},r["default"].createElement("h3",{className:"btn_group_label"},e.topButtonsLabel),r["default"].createElement("div",{className:"btn-toolbar"},e.topButtons)),r["default"].createElement("div",{className:"pull-right"},r["default"].createElement("h3",{className:"btn_group_label"},e.bottomButtonsLabel),r["default"].createElement("div",{className:"btn-toolbar"},e.bottomButtons)))))};var n=a(1),r=l(n)},208:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return r["default"].createElement("div",{className:"col-sm-9 col-lg-8 col-lg-offset-1 app"},r["default"].createElement(i["default"],{title:e.title,mandatory:e.mandatory,multiples:e.multiples,description:e.long_description?e.long_description:e.description,example:e.example,lod_type:e.lod_type}),r["default"].createElement(o["default"],e),r["default"].createElement(c["default"],{fieldTitle:e.title,construct:e.construct,extras:e.graph_extras,showModal:e.showModal}))};var n=a(1),r=l(n),s=a(212),i=l(s),u=a(211),o=l(u),d=a(209),c=l(d)},209:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=l(n),s=a(39),i=l(s),u=a(81),o=l(u),d=r["default"].createClass({displayName:"ItemMapping",getInitialState:function(){return{svg:""}},componentWillReceiveProps:function(e){e.construct!=this.props.construct&&this.getSvg(e)},componentDidMount:function(){this.getSvg(this.props)},getSvg:function(e){var t=this;return!!e.construct&&(this.setState({svg:""}),void i["default"].post("/graph",{ttl:e.construct,extras:e.extras},function(e){return t.setState({svg:e})}))},render:function(){var e=this.state.svg?r["default"].createElement("img",{className:"img-responsive center-block",src:this.state.svg}):r["default"].createElement("p",{className:"textCenter"},"Loading Diagram..."),t="";return this.state.svg&&(t=r["default"].createElement("div",{className:"row"},r["default"].createElement("div",{className:"col-lg-10 col-lg-offset-1 text-center"},r["default"].createElement(o["default"],{func:this.props.showModal,text:this.props.construct},"Show Mapping as Turtle")))),r["default"].createElement("section",{className:"illustration"},r["default"].createElement("div",{className:"row"},r["default"].createElement("div",{className:"col-md-12"},r["default"].createElement("h4",null,"AAC Target Mapping For ",r["default"].createElement("strong",null,this.props.fieldTitle)),e)),t)}});t["default"]=d},210:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=l(n),s=a(81),i=l(s),u=a(216),o=l(u),d=a(213);t["default"]=r["default"].createClass({displayName:"sparql_results",render:function(){var e=this;if(!this.props.results)return!1;var t=this.props.select.split(" "),a=t.map(function(e){return r["default"].createElement("th",{key:e},e.replace("?",""))}),l=null;return l=this.props.results.values.length>0?this.props.results.values.map(function(t,a){var l=e.props.select.split(" ").map(function(e){var l=t[e.replace("?","")];return/^https?:\/\//.test(l)&&(l=/\.(?:jpg|png|tif|tiff|svg)$/.test(l)?r["default"].createElement("a",{href:l,target:"_blank"},r["default"].createElement("img",{className:"img-responsive",src:l})):r["default"].createElement("a",{href:l,target:"_blank"},(0,d.truncate)(l,40))),r["default"].createElement("td",{key:a+"_"+e}," ",l)});return r["default"].createElement("tr",{key:a},l)}):r["default"].createElement("tr",null,r["default"].createElement("td",{colSpan:t.length,className:"no_results"},"No results found.")),r["default"].createElement("div",{className:"row results"},r["default"].createElement("div",{className:"col-md-10 col-md-offset-1"},r["default"].createElement("div",{className:"panel panel-default"},r["default"].createElement("table",{className:"table table-hover"},r["default"].createElement("thead",null,r["default"].createElement("tr",null,a)),r["default"].createElement("tbody",null,l)),r["default"].createElement("div",{className:"panel-body text-cente hidden-printr"},r["default"].createElement("div",{className:"btn-group btn-group-xs "},r["default"].createElement(i["default"],{func:this.props.showModal,text:this.props.results.select,title:"SPARQL Query"},"Show this Query"),r["default"].createElement(i["default"],{func:this.props.showModal,text:this.props.results.object,title:"Results as Linked Open Data"},"Show as Turtle"))),r["default"].createElement("div",{className:"panel-footer hidden-print"},r["default"].createElement(o["default"],{title:this.props.title,query:this.props.results.select})))))}})},211:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=l(n),s=a(57),i=a(39),u=l(i),o=a(81),d=(l(o),a(210)),c=l(d),f=a(133),p=l(f),m=r["default"].createClass({displayName:"SparqlSearch",getInitialState:function(){return{results:!1,isSearching:!1}},componentDidMount:function(){this.autoSearch()},componentWillReceiveProps:function(e){e.title!=this.props.title&&this.setState({results:!1})},componentDidUpdate:function(e){e.title==this.props.title&&e.search.endpoint==this.props.search.endpoint||this.autoSearch()},autoSearch:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];e&&e.preventDefault();var t=(0,u["default"])("#search_form").serializeArray();this.doSearch(t)},doSearch:function(e){var t={},a=!1;if(e.forEach(function(e){"entity_uri"==e.name&&""==e.value&&(a=!0),t[e.name]=e.value}),a)return!1;var l={fields:{select:this.props.select,construct:this.props.construct,where:this.props.where,values:this.props.values},endpoint:this.props.search.endpoint,crm:this.props.search.predicate,values:t};u["default"].post("/search",l,this.handleResults),this.setState({isSearching:!0})},handleResults:function(e){this.setState({results:e,isSearching:!1})},render:function(){var e=this,t=this.props.values.split(" ").map(function(t){var a=t.replace("?",""),l=e.props["test_"+a];return"entity_uri"==a&&(l=e.props.search[ENTITY_TYPE]["default"]),r["default"].createElement(p["default"],{key:a,value:a,"default":l})});return r["default"].createElement("section",{className:"search"},r["default"].createElement("div",{className:"row"},r["default"].createElement("div",{className:"col-md-12"},r["default"].createElement("h4",null,"Search ",this.props.search.name," for ",r["default"].createElement("strong",null,this.props.title)),r["default"].createElement("form",{id:"search_form",className:"form-horizontal",onSubmit:this.state.isSearching?null:this.autoSearch},t,r["default"].createElement("div",{className:"form-group hidden-print"},r["default"].createElement("div",{className:"col-sm-offset-3 col-sm-6"},r["default"].createElement(s.Button,{bsStyle:"primary",disabled:this.state.isSearching,onClick:this.state.isSearching?null:this.autoSearch},this.state.isSearching?"Searching...":"Search")))))),r["default"].createElement(c["default"],{title:this.props.title,select:this.props.select,results:this.state.results,showModal:this.props.showModal}))}});t["default"]=m},212:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return r["default"].createElement("section",{className:"field_info"},r["default"].createElement("div",{className:"row"},r["default"].createElement("div",{className:"col-md-12"},r["default"].createElement("h2",{className:"field_name"},e.title),r["default"].createElement("p",null,e.description))),r["default"].createElement("div",{className:"row"},r["default"].createElement("div",{className:"col-md-12"},r["default"].createElement("dl",{className:"dl-horizontal"},r["default"].createElement("dt",null,"Sample Data: "),r["default"].createElement("dd",null,e.example),r["default"].createElement("dt",null,"Mandatory:"),r["default"].createElement("dd",null,e.mandatory?"Yes":"No"),r["default"].createElement("dt",null,"Multiples:"),r["default"].createElement("dd",null,e.multiples?"Yes":"No"),r["default"].createElement("dt",null,e.lod_type?"Associated AAC ID:":""),r["default"].createElement("dd",null,r["default"].createElement("a",{href:e.lod_type,target:"_blank"},e.lod_type))))))};var n=a(1),r=l(n)},213:function(e,t){"use strict";function a(e,t){return e.length<=t?e:e.substring(0,t-3)+"..."}Object.defineProperty(t,"__esModule",{value:!0}),t.truncate=a},214:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=l(n),s=a(7),i=l(s),u=r["default"].createClass({displayName:"Sidebar",render:function(){var e=this,t=this.props.fields.map(function(t,a){return r["default"].createElement(o,{id:a,name:t.title,desc:t.description,key:t.category+"_"+t.title,func:e.props.gotoField,applies_to:t.applies_to,category:t.category,prev_category:0==a?"":e.props.fields[a-1].category,selected:a==e.props.currentItem})});return r["default"].createElement("div",{className:"col-md-3 col-lg-2 sidebar hidden-print"},r["default"].createElement("dl",null,t))}}),o=r["default"].createClass({displayName:"SidebarListItem",handleClick:function(){this.props.func(this.props.id)},render:function(){var e=(0,i["default"])("sidebar_item",{selected:this.props.selected}),t=!1;return this.props.category!=this.props.prev_category&&(t=r["default"].createElement("h5",null," ",this.props.category," ")),r["default"].createElement("div",null,t,r["default"].createElement("div",{className:e,onClick:this.handleClick},r["default"].createElement("dt",null," ",this.props.name," "),r["default"].createElement("dd",null," ",this.props.desc," ")))}});t["default"]=u},215:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},r=a(39),s=(l(r),a(1)),i=l(s),u=a(57),o=i["default"].createClass({displayName:"ContentModal",render:function(){var e=Object.assign({},this.props);return delete e.content,delete e.title,i["default"].createElement(u.Modal,n({},e,{bsSize:"large","aria-labelledby":"contained-modal-title-lg"}),i["default"].createElement(u.Modal.Header,{closeButton:!0},i["default"].createElement("h4",null,this.props.title)),i["default"].createElement(u.Modal.Body,null,i["default"].createElement("pre",null,this.props.content||"Nothing to see here...")),i["default"].createElement(u.Modal.Footer,null,i["default"].createElement(u.Button,{onClick:this.props.onHide},"Close")))}});t["default"]=o},216:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=encodeURIComponent("Problem with mapping of "+e.title),a=encodeURIComponent("I expected to see:\n\n*[WHAT I EXPECTED]*\n\nbut instead I saw:\n\n*[WHAT I SAW]*\n\nThe current query was:\n\n```ttl\n"+e.query+"\n```"),l="https://github.com/workergnome/aac_mappings/issues/new?title="+t+"&body="+a;return r["default"].createElement("div",{className:"github_issue_link"},r["default"].createElement("a",{href:l},"Do you see a problem with this?  Submit an issue."))};var n=a(1),r=l(n)}});
//# sourceMappingURL=app.js.map