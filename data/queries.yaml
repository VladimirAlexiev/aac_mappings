E22_Man-Made_Object:
  fields:
    - title: Primary Title
      mandatory:   true
      multiples:   false
      description: "The primary display title of the work."
      long_description: "This is the primary title for the object, as selected by the providing institution.  When there are no other titles, it is often the only one."
      example:     "Young Women Picking Fruit"
      select:      "?title_value ?primary_title_type_name ?primary_title_uri"
      values:      "?object_uri ?preferred_title_type_url"
      lod_type:    "http://vocab.americanartcollaborative.org/titles#primary_title_type"

      test_object_uri: "http://collection.britishart.yale.edu/id/object/499"
      test_preferred_title_type_url: "http://collection.britishart.yale.edu/id/thesaurus/title/preferred"
      
      construct: |
        ?object_uri a crm:E22_Man-Made_Object .
        ?object_uri crm:P102_has_title _:title .
        _:title a crm:E35_Title ;
          rdfs:label ?title_value ;
          crm:P2_has_type _:title_class ;
          skos:exactMatch ?primary_title_uri .
        _:title_class a crm:E55_Type ;
          rdfs:label ?primary_title_type_name ;
          skos:exactMatch ?preferred_title_type_url ;
          skos:broadMatch <http://vocab.americanartcollaborative.org/titles#primary_title_type> .
      
      where: |
          ?object_uri a crm:E22_Man-Made_Object .
          ?object_uri crm:P102_has_title ?primary_title_uri .
          ?primary_title_uri a crm:E35_Title ;
                  rdfs:label ?title_value ; 
                  crm:P2_has_type  ?preferred_title_type_url .  
          ?preferred_title_type_url rdfs:label ?primary_title_type_name .       
    

    - title: Other Titles
      mandatory:   false
      multiples:   true
      description: "Alternate titles for the work."
      example:     "Young Women Picking Fruit"
      select:      "?title ?field_label ?preferred_title_uri"
      values:      "?object_uri ?preferred_title_type_url"
      construct: |
        ?object_uri a crm:E22_Man-Made_Object .
        ?object_uri crm:P102_has_title _:title .
        _:title a crm:E35_Title ;
          rdfs:label ?title ;
          skos:exactMatch ?preferred_title_uri ;
          crm:P2_has_type _:title_class .
        _:title_class a crm:E55_Type ;
          skos:exactMatch ?value_type ;
          rdfs:label ?field_label .
      where: |
        ?object_uri a crm:E22_Man-Made_Object .
        ?object_uri crm:P102_has_title ?preferred_title_uri .
        ?preferred_title_uri a crm:E35_Title ;
          rdfs:label ?title ;
          crm:P2_has_type  ?value_type . 
        ?value_type a crm:E55_Type ;
          rdfs:label ?field_label .

        FILTER(?value_type != ?preferred_title_type_url)
        FILTER (!isBlank(?value_type))

    - title: Object Number
      mandatory:   false
      multiples:   false
      description: "The preferred identifier for the work."
      example:     "1995.1.1"
      select:      "?value ?source"
      values:      "?object_uri"
      construct: |
        ?object_uri a crm:E22_Man-Made_Object ;
          crm:P48_has_preferred_identifier _:id .
        _:id a crm:E42_Identifier ;
          rdfs:label ?value ;
          skos:exactMatch ?source .
      where: |
        ?object_uri a crm:E22_Man-Made_Object .
        ?object_uri crm:P48_has_preferred_identifier ?source .
        ?source a crm:E42_Identifier ;
          rdfs:label ?value .
        FILTER (!isBlank(?source))


