E22_Man-Made_Object:
  fields:
    - title: Primary Title
      mandatory:   true
      multiples:   false
      description: "The primary display title of the work."
      long_description: "This is the primary title for the object, as selected by the providing institution.  When there are no other titles, it is often the only one."
      example:     "Young Women Picking Fruit"
      select:      "?title_value ?primary_title_type_name ?primary_title_uri"
      values:      "?object_uri ?preferred_title_type_url"
      lod_type:    "http://vocab.americanartcollaborative.org/titles#primary_title_type"

      test_object_uri: "http://collection.britishart.yale.edu/id/object/499"
      test_preferred_title_type_url: "http://collection.britishart.yale.edu/id/thesaurus/title/preferred"
      
      construct: |
        ?object_uri a crm:E22_Man-Made_Object .
        ?object_uri crm:P102_has_title _:primary_title_uri .
        _:primary_title_uri a crm:E35_Title ;
          rdfs:label ?title_value ;
          crm:P2_has_type _:preferred_title_type_url ;
          owl:sameAs ?primary_title_uri .
        _:preferred_title_type_url a crm:E55_Type ;
          rdfs:label ?primary_title_type_name ;
          owl:sameAs ?preferred_title_type_url ;
          skos:broadMatch <http://vocab.americanartcollaborative.org/titles#primary_title_type> .
      
      where: |
          ?object_uri a crm:E22_Man-Made_Object .
          ?object_uri crm:P102_has_title ?primary_title_uri .
          ?primary_title_uri a crm:E35_Title ;
                  rdfs:label ?title_value ; 
                  crm:P2_has_type  ?preferred_title_type_url .
          ?preferred_title_type_url rdfs:label ?primary_title_type_name .       
    

    - title: Other Titles
      mandatory:   false
      multiples:   true
      description: "Alternate titles for the work."
      example:     "Young Women Picking Fruit"
      select:      "?title ?field_label ?preferred_title_uri"
      values:      "?object_uri ?preferred_title_type_url"
      test_object_uri: "http://collection.britishart.yale.edu/id/object/499"
      test_preferred_title_type_url: "http://collection.britishart.yale.edu/id/thesaurus/title/preferred"

      construct: |
        ?object_uri a crm:E22_Man-Made_Object .
        ?object_uri crm:P102_has_title _:title .
        _:title a crm:E35_Title ;
          rdfs:label ?title ;
          owl:sameAs ?preferred_title_uri ;
          crm:P2_has_type _:title_class .
        _:title_class a crm:E55_Type ;
          owl:sameAs ?value_type ;
          rdfs:label ?field_label .
      where: |
        ?object_uri a crm:E22_Man-Made_Object .
        ?object_uri crm:P102_has_title ?preferred_title_uri .
        ?preferred_title_uri a crm:E35_Title ;
          rdfs:label ?title ;
          crm:P2_has_type  ?value_type . 
        ?value_type a crm:E55_Type ;
          rdfs:label ?field_label .

        FILTER(?value_type != ?preferred_title_type_url)
        FILTER (!isBlank(?value_type))

    - title: Object Number
      mandatory:   false
      multiples:   false
      description: "The preferred identifier for the work."
      example:     "1995.1.1"
      test_object_uri: "http://collection.britishart.yale.edu/id/object/499"
      select:      "?object_number ?object_number_label ?object_number_id"
      values:      "?object_uri"
      construct: |
        ?object_uri a crm:E22_Man-Made_Object ;
          crm:P48_has_preferred_identifier _:object_number_id .
        _:object_number_id a crm:E42_Identifier ;
          rdfs:label ?object_number ;
          owl:sameAs ?object_number_id ;
          crm:P2_has_type _:identifier_type .
        _:identifier_type a crm:E55_Type ;
          skos:prefLabel ?object_number_label ;
          owl:sameAs ?identifier_type .
      where: |
        ?object_uri a crm:E22_Man-Made_Object .
        ?object_uri crm:P48_has_preferred_identifier ?object_number_id .
        ?object_number_id a crm:E42_Identifier ;
          rdfs:label ?object_number ;
        OPTIONAL {
         ?object_number_id crm:P2_has_type ?identifier_type .
         ?identifier_type skos:prefLabel ?object_number_label .
        }
        FILTER (!isBlank(?object_number_id))


